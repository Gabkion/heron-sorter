# AI Sorter

Εδώ βρίσκονται οι οδηγίες χρήσης και ο πηγαίος κώδικας για το AI Sorter, ένα project βασισμένο στο [Tiny Sorter](https://experiments.withgoogle.com/tiny-sorter/view/) της Google.

## Οδηγίες

### Υλικά

Για την υλοποίηση απαιτούνται τα εξής:

- Arduino Leοnardo
- Micro Servo (SG90)
- Jumper Wires (Male to Male)
- Webcam
- Χαρτόνι
- Κολλητική Ταινία
- Χάρακας

### Στόχος

Ο στόχος είναι χρησιμοποιώντας τα παραπάνω να φτιαχτεί ένας ταξινομητής δημητριακών. Ο ταξινομητής θα χρησιμοποιεί μια κάμερα για να "δει" τα δημητριακά και ένα μοντέλο μηχανικής μάθησης για να τα ταξινομήσει σε δύο κατηγορίες. Ο Arduino θα ελέγχει έναν σερβοκινητήρα που θα κατευθύνει τα δημητριακά σε δύο διαφορετικά δοχεία ανάλογα με την κατηγορία στην οποία ανήκουν.

### Εγκατάσταση

1. Κατεβάστε το **Arduino IDE** από <a href="https://www.arduino.cc/en/software" target="_blank">εδώ</a> και εγκαταστήστε το.
2. Κατεβάστε το αρχείο του arduino sketch `sorter_sketch.ino` και την βιβλιοθήκη WebUSB από <a href="https://github.com/webusb/arduino/archive/gh-pages.zip" target="_blank">εδώ</a>.

>[!CAUTION]
> Πριν συνδέσετε το Arduino Leonardo στον υπολογιστή σας, πρέπει να ακολουθήσετε την παρακάτω διαδικασία για να αναβαθμίσετε το USB του Arduino IDE από 2.0 σε 2.1:
>
> 3. Ανοίξτε τον φάκελο της εγκατάστασης του Arduino IDE στον υπολογιστή σας.
> 4. Ακολουθήστε τη διαδρομή: `hardware/arduino/avr/cores/arduino/`
> 5. Βρείτε και ανοίξτε το αρχείο `USBCore.h` με έναν επεξεργαστή κειμένου (π.χ. Notepad).
> 6. Αναζητήστε τη γραμμή `#define USB_VERSION 0x200`
> 7. Αλλάξτε `0x200` σε `0x210`
> 8. Αποθηκεύστε το αρχείο.

9. Ανοίξτε το αρχείο `sorter_sketch.ino`.
10. Προσθέστε τη βιβλιοθήκη WebUSB στο Arduino IDE πηγαίνοντας στο **Sketch > Include Library > Add .ZIP Library...** και επιλέγοντας το αρχείο zip που κατεβάσατε.
11.  Συνδέστε το Arduino Leonardo στον υπολογιστή σας μέσω USB.
12. Επιλέξτε την σωστή πλακέτα και θύρα στο Arduino IDE πηγαίνοντας στο **Tools > Board > Arduino Leonardo** και **Tools > Port**.
13. Ανεβάστε τον κώδικα στο Arduino πατώντας το κουμπί **Upload**.

### Εκπαίδευση Μοντέλου

1. Τοποθετείστε την κάμερα σε σταθερή θέση ώστε να βλέπει τα δημητριακά που θα ταξινομήσετε.
2. Πατήστε <a href="https://teachablemachine.withgoogle.com/train/image" target="_blank">εδώ</a> για να δημιουργήσετε ένα νέο μοντέλο εικόνας στο Teachable Machine.
3. Προσθέστε στην πρώτη κατηγορία (Class 1) εικόνες του πρώτου τύπου δημητριακών και στη δεύτερη κατηγορία (Class 2) εικόνες του δεύτερου τύπου δημητριακών μέσω της κάμερας.
4. Προσθέστε σε νέα κατηγορία (Class 3) εικόνες από τον κενό χώρο (χωρίς δημητριακά).

>[!TIP]
> Για καλύτερα αποτελέσματα, βεβαιωθείτε ότι στην τρίτη κατηγορία έχετε εικόνες με εσάς να τοποθετείτε τα δημητριακά (να φαίνονται τα χέρια σας), ώστε ο ταξινομητής να μην ταξινομεί όσο τοποθετείτε τα δημητριακά.
>

5. Εκπαιδεύστε το μοντέλο πατώντας το κουμπί **Train Model**.
6. Μετά την εκπαίδευση, πατήστε το κουμπί **Export Model** και επιλέξτε **Upload to Cloud**.
7. Αντιγράψτε το URL.

### Τελική Σύνδεση

1. Μεταβείτε <a href="https://gabkion.github.io/heron-sorter/" target="_blank">εδώ</a>.
2. Επικολλήστε το URL του μοντέλου στο πεδίο **Paste your model URL**.
3. Συνδέστε το Arduino στον υπολογιστή σας και πατήστε το κουμπί **Connect Arduino** στην ιστοσελίδα. Θα εμφανιστεί ένας επιλογέας συσκευών USB, επιλέξτε το Arduino Leonardo σας.

Είστε έτοιμοι!

### Παραμετροποίηση Ετικετών

Στην εφαρμογή P5.js, μπορείτε να αλλάξετε τις ετικέτες των κατηγοριών κάνοντας κλικ στις αντίστοιχες ετικέτες που εμφανίζονται στην οθόνη. Θα είναι αναγκάιο να το κάνετε αν έχετε αλλάξει τα ονόματα των ετικετών κατά την εκπαίδευση του μοντέλου στο Teachable Machine.

### Λογισμικό

Το λογισμικό αποτελείται από δύο μέρη: τον κώδικα για το Arduino και τον κώδικα για την εφαρμογή P5.js που τρέχει στον υπολογιστή.
Ο κώδικας για το Arduino είναι υπεύθυνος για τον έλεγχο του σερβοκινητήρα, ενώ ο κώδικας για την εφαρμογή P5.js είναι υπεύθυνος για τη λήψη εικόνων από την κάμερα, την αποστολή τους στο μοντέλο μηχανικής μάθησης και την αποστολή εντολών στον Arduino ανάλογα με τα αποτελέσματα της ταξινόμησης.
Ο κώδικας Arduino βρίσκεται στο αρχείο `sorter_sketch.ino`.
Ο κώδικας για την εφαρμογή P5.js βρίσκεται στα αρχεία `index.html`, `sketch.js`, `serial.js` και `elements.js`.
